<!doctype html>
<html>

<head>
    <title>Flight Risk Calculator</title>
    <meta name="description" content="Flight Risk Calculator">
    <meta name="keywords" content="Pilot Checklist Risk Analysis">
</head>

<body>
    <h4>Flight rules</h4>
    <input type="radio" id="vfr" name="flightRules" value="vfr" checked=true onchange="conditionVFR(true)">
    <label for="vfr">VFR</label>
    <input type="radio" id="ifr" name="flightRules" value="ifr" onchange="conditionVFR(false)">
    <label for="ifr">IFR</label><br>

    <h3>Pilot</h3>
    <label for="1"><input type="checkbox" id="1" name="1"> Less than 100 hours in type<br></label>
    <label for="2"><input type="checkbox" id="2" name="2"> Unfamiliar Destination<br></label>
    <label for="3"><input type="checkbox" id="3" name="3"> Fatigue (less than normal sleep prior night)<br></label>
    <label for="4"><input type="checkbox" id="4" name="4"> Flight at end of work day<br></label>
    <label for="5"><input type="checkbox" id="5" name="5"> Scheduled commitment after flight<br></label>
    <label for="6"><input type="checkbox" id="6" name="6"> Recent death of close family member<br></label>
    <label for="7"><input type="checkbox" id="7" name="7"> Major domestic problems<br></label>
    <label for="8"><input type="checkbox" id="8" name="8"> Illness in family<br></label>
    <label for="9"><input type="checkbox" id="9" name="9"> Second pilot who is rated and current<br></label>
    <label for="10"><input type="checkbox" id="10" name="10"> Alcohol within the last 24 hours<br></label>
    <label for="11"><input type="checkbox" id="11" name="11"> Taking over the counter medication<br></label>
    <label for="12"><input type="checkbox" id="12" name="12"> Inadequate food prior to flight<br></label>
    <label for="13"><input type="checkbox" id="13" name="13"> Inadequate water prior to flight/no water on
        board<br></label>
    <label for="14"><input type="checkbox" id="14" name="14"> Day > 10,000’ PA with no supplemental Oxygen<br></label>
    <label for="15"><input type="checkbox" id="15" name="15"> Night > 5,000’ PA with no supplemental Oxygen<br></label>
    <label for="16"><input type="checkbox" id="16" name="16"> Flight duration more than 3 hours<br></label>
    <label for="17"><input type="checkbox" id="17" name="17"> Fuel calculation completed for flight with reserves for
        day/night conditions<br></label>
    <label for="18"><input type="checkbox" id="18" name="18"> Total fuel required for flight with reserves for day/night
        conditions less 60% of available fuel<br></label>
    <label for="19"><input type="checkbox" id="19" name="19"> Weight and balance calculated<br></label>
    <label for="20"><input type="checkbox" id="20" name="20"> Weight within 10% of maximum gross<br></label>
    <label for="21"><input type="checkbox" id="21" name="21"> Takeoff or landing distance more than 50% of runway
        length<br><br></label>
    <label for="22"><input type="radio" id="22" name="visibility"> Visibility > 5 miles<br></label>
    <label for="23"><input type="radio" id="23" name="visibility"> Visibility 3 to 5 miles<br></label>
    <label for="24"><input type="radio" id="24" name="visibility"> Visibility 1 to 3 miles<br></label>
    <label for="25"><input type="radio" id="25" name="visibility"> Visibility less than 1 mile<br><br></label>
    <label for="26"><input type="radio" id="26" name="ceilings"> Ceilings > 3,000’ AGL<br></label>
    <label for="27"><input type="radio" id="27" name="ceilings"> Ceilings less than 3,000’ AGL<br></label>
    <label for="28"><input type="radio" id="28" name="ceilings"> Ceilings less than 1,000’AGL<br></label>
    <label for="29"><input type="radio" id="29" name="ceilings"> Ceilings less than 500’AGL<br><br></label>
    <label for="30"><input type="checkbox" id="30" name="30" onChange="toggleVis('detection')">
        Convective activity within 20 NM of flight path<br>
    </label>
    <label for="31"><input type="radio" id="31" name="detection"> Convective act./ no storm-scope/detection
        capability<br></label>
    <label for="32"><input type="radio" id="32" name="detection"> Convective activity with detection
        capability<br><br></label>
    <label for="33"><input type="checkbox" id="33" name="33"> Destination dew point spread less than 3°<br></label>
    <label for="34"><input type="checkbox" id="34" name="34"> No de-icing equipment, surface temperature less than 40°
        F, and low clouds or precipitation<br></label>
    <label for="35"><input type="checkbox" id="35" name="35"> Icing forecast (AIRMET more than light) at altitude
        required to fly with de-icing equipment<br></label>
    <label for="36"><input type="checkbox" id="36" name="36"> Operational control tower at destination<br></label>
    <label for="37"><input type="checkbox" id="37" name="37"> VASI/PAPI at destination<br></label>
    <label for="38"><input type="checkbox" id="38" name="38"> Radar environment at destination<br></label>
    <label for="39"><input type="checkbox" id="39" name="39"> Mountainous terrain<br></label>
    <label for="40"><input type="checkbox" id="40" name="40"> Approach/departure over water<br></label>
    <label for="41"><input type="checkbox" id="41" name="41"> High bird hazard<br></label>
    <label for="42"><input type="checkbox" id="42" name="42"> Unpaved runway<br></label>
    <label for="43"><input type="checkbox" id="43" name="43"> IFR and only approach is non-precision<br></label>
    <label for="44"><input type="checkbox" id="44" name="44"> Weather reporting at airport<br></label>
    <label for="45"><input type="checkbox" id="45" name="45"> Precipitation causing obstruction to
        visibility<br></label>
    <label for="46"><input type="checkbox" id="46" name="46"> Wet runway<br></label>
    <label for="47"><input type="checkbox" id="47" name="47"> Ice on runway<br></label>
    <label for="48"><input type="checkbox" id="48" name="48"> Crosswind 90% of max POH<br></label>
    <label for="49"><input type="checkbox" id="49" name="49"> Using flight following/radar advisories in high density
        traffic areas<br></label>
    <label for="50"><input type="checkbox" id="50" name="50"> On IFR flight plan during VFR conditions<br></label>
    <button type="button" onClick="calculate()">Calculate</button>
    <h1>Result</h1>
    <h2 id="result"></h2>
    <p id="resultRisk"></p>
</body>
<script>
    vfrVals = [
        2,
        1,
        2,
        2,
        2,
        2,
        2,
        1,
        -1,
        2,
        3,
        2,
        2,
        2,
        3,
        2,
        -1,
        -2,
        -1,
        2,
        2,
        0,
        2,
        3,
        20,
        0,
        3,
        10,
        20,
        5,
        10,
        0,
        5,
        30,
        0,
        -2,
        -1,
        -1,
        3,
        1,
        1,
        1,
        ,
        -1,
        2,
        1,
        2,
        2,
        -1,
        -1
    ];
    ifrVals = [
        3,
        1,
        3,
        3,
        2,
        2,
        2,
        1,
        -1,
        2,
        3,
        2,
        2,
        2,
        3,
        2,
        -1,
        -3,
        -1,
        2,
        2,
        0,
        0,
        0,
        1,
        0,
        0,
        1,
        2,
        3,
        3,
        -2,
        1,
        10,
        2,
        -2,
        -1,
        -1,
        3,
        1,
        1,
        1,
        2,
        -1,
        1,
        1,
        2,
        2,
        0,
        -1
    ];
    iceing = document.getElementById("35").parentElement;
    approach = document.getElementById("43").parentElement;
    flightFollowing = document.getElementById("49").parentElement;
    ifrPlanVMC = document.getElementById("50").parentElement;

    function conditionVFR(isVFR) {
        iceing.hidden = isVFR;
        approach.hidden = isVFR;
        flightFollowing.hidden = !isVFR;
        ifrPlanVMC.hidden = !isVFR;
    }

    function calcSum(vals) {
        result = 0;
        for (i = 0; i < vals.length; i++) {
            element = document.getElementById(i + 1);
            // console.log(element.id + ": " + element.checked);
            if (element.checked && !element.parentElement.hidden) {
                // console.log(element.labels[0].textContent + ": "+ vals[i])
                result += vals[i];
                console.log(result);
            }
        }
        return result;
    }

    function calculate() {
        vals = [];
        if (document.getElementById("ifr").checked) {
            vals = ifrVals
        } else {
            vals = vfrVals
        }
        result = calcSum(vals);
        resultRisk = "Risk ";
        threasholds = [6, 9, 15];
        switch (true) {
            case result < threasholds[0]:
                resultRisk += "Minimal: G0";
                break;
            case result < threasholds[1]:
                resultRisk += "Low: Consider Alternate Actions";
                break;
            case result < threasholds[2]:
                resultRisk += "Medium: Consult Experienced CFI";
                break;
            default:
                resultRisk += "High: Don't Go !!!";
        }
        document.getElementById("result").innerHTML = result;
        document.getElementById("resultRisk").innerHTML = resultRisk;
        document.getElementById("resultRisk").scrollIntoView();
    }

    function toggleVis(name) {
        for (let element of document.getElementsByName(name)) {
            if (element.parentElement.hidden) {
                element.parentElement.hidden = false;
            } else {
                element.parentElement.hidden = true;
            }
        }
    }

    function hide(name) {
        for (let element of document.getElementsByName(name)) {
            element.parentElement.hidden = true;
        }
    }

    hide("detection");
    conditionVFR(true);
</script>

</html>